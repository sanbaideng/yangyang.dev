---
title: Набор задач
date: 2023-04-07 14:25:44
фон: bg-[#8bbb55]
теги:
    - процесс
    - менеджер процессов
категории:
    - Linux Command
intro:
    Команда taskset используется для установки или получения данных о принадлежности процессора
    запущенного процесса, задав его pid, или для запуска новой команды
    с заданной близостью к процессору.
плагины:
    - copyCode
---

Начало работы {.cols-3}
--------

### Использование
По умолчанию запускается новая команда с заданной маской сродства
``Шелл
$ taskset [mask] [command] [arguments]
```

#### Использование #2
```hell
$ taskset -p [pid]
```
---------
```hell
$ taskset -p [mask] [pid]
```
Вы также можете получить информацию о сродстве к процессору для существующей задачи


 ### Общие опции {.col-span-2}
| Command | Alternavite | Meaning |
|---------|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| `-a` | --all-tasks | Устанавливает или извлекает сродство к процессору всех задач (потоков) для заданного PID.                                                                              |
| `-c` | --cpu-list | Интерпретировать маску как числовой список процессоров вместо битовой маски.</br> Числа разделяются запятыми и могут включать диапазоны. Например: `0,5,8-11`.
| `-p` | --pid | Оперировать существующим PID и не запускать новую задачу.                                                                                                 |
| | `-h` | --help | Вывести текст справки и выйти.                                                                                                                              |
| | `-v` | --version | Вывести версию и выйти.                                                                                                                                  |
{.show-header}

Пример
--------

### View CPU Affinity
``hell
$ taskset -cp 29523
текущий список сродства для pid 29523: 0-15
```
Это означает, что процесс с PID `29523` активен на CPU в диапазоне от `[0,1,...,15]`, что означает `16` всего.

**PID**: Process Identifier - уникальный числовой идентификатор, присваиваемый каждому запущенному процессу, PID процессов можно посмотреть в инструментах `top` или `htop`.

Если при выполнении приведенной выше команды появляется сообщение `bad usage`, попробуйте использовать PID = 1_.

 ``hell
 $ taskset -cp 1
 ```

### Установить привязку к процессору
Теперь попробуем установить процесс на определенный процессор. Например, у нас есть процесс с PID = 14846

Сначала посмотрим список CPU affinity этого процесса:
``hell
$ taskset -cp 14846
текущий список сродства pid 14846: 0-15
```

#### Изменить сродство процессора на 1:
``hell
$ taskset -cp 1 14846
текущий список сродства для pid 14846: 0-15
новый список аффинити для пида 14846: 1
```
Как мы видим, сродство процессора было изменено

### Установить аффинити процессора с множественным значением
Это означает, что новый список сродства процессора будет `[0,1,2,3]`.
``hell
$ taskset -cp 0-3 14846
текущий список сродства pid 14846: 1
новый список аффинити для pid 14846: 0-3
```

Настроить один процессор можно с помощью следующей команды:

``hell
$ taskset -cp 5,8,12 14846
текущий список сродства pid 14846: 0-3
новый список аффинити для pid 14846: 5,8,12
```
Это означает, что новый список сродства процессора - `[5,8,12]`.

### Other
Вы можете задать сродство по диапазону с помощью других параметров, например, указать процессор
``hell
$ taskset -cp 1-3,12 14846
```

Или

``Шелл
$ taskset -cp 1-6:2 14846
```
Суффикс ":N" указывает на диапазон, например, 0-10:3 интерпретируется как список 0,3,6,9.



Также см.
--------
[taskset - страница руководства по Linux](https://man7.org/linux/man-pages/man1/taskset.1.html) _(man7.org)_.
